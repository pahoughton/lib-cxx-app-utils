#
# Makefile for libClue
#
#
# Created: 3/23/95
#
# $Id$
#
# (see end of file for Log info)

#
# Include standard MakeConfig configuration for GNU make required
#

include Make/make.cfg.2.2

BETA_LIB_DIR	= 
BETA_INC_DIR	= 

PROD_LIB_DIR	= 
PROD_INC_DIR	= 

LIBRARY		= libClue.a

USER_INCS	=			\

PROTO_H		= _Clue_Proto.h

# **** S O U R C E   F I L E S ****

LIB_C_SOURCES	=			\
	regex.c				\


LIB_CXX_SOURCES	=			\
	ClassVersion.C			\
	LibTest.C			\
	BinStream.C			\
	NetStream.C			\
	RandomStream.C			\
	HeapStream.C			\
	HeapBinStream.C			\
	HeapNetStream.C			\
	StripWhite.C			\
	StringCaseCompare.C		\
	StringLower.C			\
	StringUpper.C			\
	StringCapitalize.C		\
	StringSearch.C			\
	StringReverseSearch.C		\
	StringCaseSearch.C		\
	StringCaseReverseSearch.C	\
	StringTo.C			\
	StrStreambuf.C			\
	SubStr.C			\
	Str.C				\
	RegexScan.C			\
	DateTimeUtils.C			\
	DateTime.C			\
	DateRange.C			\
	DateRangeDaily.C		\
	DateRangeWeekly.C		\
	Bitmask.C			\
	FilePath.C			\
	LogLevel.C			\
	LogBuf.C			\
	Log.C				\
	Param.C				\
	Timer.C				\
	$(ARCH_CXX_SOURCES)		\


UNIX_CXX_SOURCES    =			\
	../arch/Unix/src/basename.C	\
	../arch/Unix/src/OpenFlags.C	\
	../arch/Unix/src/User.C		\
	../arch/Unix/src/UserGroup.C	\
	../arch/Unix/src/FileStat.C	\



ifeq ($(arch),Linux)
ARCH_CXX_SOURCES = $(UNIX_CXX_SOURCES)	\

endif

ifeq ($(arch),AIX)
ARCH_CXX_SOURCES = $(UNIX_CXX_SOURCES)	\
	../arch/AIX/src/bool.C		\

endif

HOLD = \

# 
# =USE_CURRENT_MAKEFILE=
# When you re-gen a make file, every thing between 
# these tags will be kept int the new makefile
# if you want it re-gen'd, just delete the tags
#

VERSION_MAJOR	= 2
VERSION_MINOR   = 00
VERSION_PATCH   = 00
VERSION_PRE     = a.01

# *****  D E F I N E S  *****
#
# see MakeConfig(1) for portable library defines
#

DEFINES		= -DCLUE_DEBUG=1 $(ARCH_DEFINES)


# *****  I N C L U D E S *****
#
# see MakeConfig(1) for portable library includes
#


SRCINCDIR	= -I.
PRJINCDIR	= -I../arch/$(arch)/src \
		  -I../arch/$(arch)/stdc++ \
		  -I../arch/Unix/src \


INCDIRS		= $(SRCINCDIR) \
		  $(PRJINCDIR)

# **** C O M P I L E / C P P ****

CPPOTHER 	=
CCDEBUG		= -g
CCOTHER		=

INSTALL_LIB_FLAGS	= -m 664
INSTALL_INC_FLAGS	= -m 664
INSTALL_MAN_FLAGS	= -m 664

# ***** D E P E N D A N C I E S *****

# =USE_CURRENT_MAKEFILE=

all: $(PROTO_H) $(LIBRARY)



$(LIBRARY): $(LIB_OBJECTS)
	$(UPDATELIB) $@ $?

clean:
	rm -f $(LIBRARY) $(LIB_OBJECTS) 

realclean:
	rm -f $(LIBRARY) $(LIB_OBJECTS) $(PROTO_H) .depend.lib TAGS 

install:
	mkdirhier $(BETA_LIB_DIR)/old
	mkdirhier $(BETA_INC_DIR)/old
	-( cd $(BETA_LIB_DIR)/old; rm -f $(LIBRARY); cd ..; mv $(LIBRARY) old )
	-( cd $(BETA_INC_DIR)/old; rm -f $(USER_INCS); cd ..; mv $(USER_INCS) old )
	$(INSTALL) $(INSTALL_LIB_FLAGS) $(LIBRARY) $(BETA_LIB_DIR)
	$(INSTALL) $(INSTALL_INC_FLAGS) $(USER_INCS) $(BETA_INC_DIR)
	echo 'Beta Install Complete!'


install_production:
	mkdirhier $(PROD_LIB_DIR)/old
	mkdirhier $(PROD_INC_DIR)/old
	-( cd $(PROD_LIB_DIR)/old; rm -f $(LIBRARY); cd ..; mv $(LIBRARY) old )
	-( cd $(PROD_INC_DIR)/old; rm -f $(USER_INCS); cd ..; mv $(USER_INCS) old )
	$(INSTALL) $(INSTALL_LIB_FLAGS) $(LIBRARY) $(PROD_LIB_DIR)
	$(INSTALL) $(INSTALL_INC_FLAGS) $(USER_INCS) $(PROD_INC_DIR)
	echo 'Beta Install Complete!'

proto: 
	$(MKPROTO) $(CPPFLAGS) $(LIB_C_SOURCES) >$(PROTO_H)

   
$(PROTO_H): $(LIB_C_SOURCES)
	$(MKPROTO) $(CPPFLAGS) $(LIB_C_SOURCES) >$@


tags: 
	etags -t *.h *.c *.C *.hh

depend: depend.lib

FORCE:
#
# include dependancies generated by 'make depend'
#
include .depend.lib

# 
# $Log$
# Revision 1.16  1995/11/05 15:28:42  houghton
# Revised
#
# Revision 1.2  1995/02/13  17:35:10  houghton
# Major enhancements much cleaner
#
# Revision 1.1  1994/01/23  18:16:55  houghton
# Production release 1.0 of MakeConfig system
#
#



