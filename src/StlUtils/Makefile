#
# Makefile for Clue
#
#
# Created: 4/13/94
#
# $Id$
#
# (see end of file for Log info)

#
# Include standard MakeConfig configuration for GNU make required
#

include make.cfg

BETA_LIB_DEST	= 
BETA_INC_DEST	= 

PROD_LIB_DEST	= 
PROD_INC_DEST	= 


LIBRARY		= libClue.a

USER_INCS	= 

PROTO_H		= _Clue_Proto.h

# **** S O U R C E   F I L E S ****

LIB_C_SOURCES   =   			\
    TeleNumFromString.c            \
    TeleNumToString.c              \


LIB_CXX_SOURCES = 			\
    SLList.C			   \
    DLList.C			   \
    error.C			   \
    CdrBillNum.C                   \
    DateRange.C                    \
    DateRangeDaily.C               \
    DateRangeWeekly.C              \
    DateTime.C                     \
    JumpTable.C                    \
    Log.C                          \
    MappedAvl.C                    \
    Mcr.C                          \
    State.C                        \
    StateToStateCode.C             \
    TeleNum.C                      \



# *****  D E F I N E S  *****
#
# see MakeConfig(1) for portable library defines
#

DEFINES		=

# *****  I N C L U D E S *****
#
# see MakeConfig(1) for portable library includes
#


SRCINCDIR	= -I.
PRJINCDIR	= -I/home/houghton/prj/generic/libCommon/src \
                  -I/home/houghton/prj/generic/libmmalloc

INCDIRS		= $(SRCINCDIR)	\
		  $(PRJINCDIR)


# **** C O M P I L E / C P P ****

CPPOTHER 	=
CCDEBUG		= -g
CCOTHER		=


# ***** D E P E N D A N C I E S *****


all: $(PROTO_H) $(LIBRARY)

$(LIBRARY): $(LIB_OBJECTS) 
	$(UPDATELIB) $@ $?

depend:: 
	touch .depend
	$(MKPROTO) -p $(LIB_C_SOURCES) >$(PROTO_H)
	$(DEPEND) -f.depend -- $(CPPFLAGS) -- $(LIB_C_SOURCES)
	sed  's/^\([^ 	].*o:.*\)$(PROTO_H)\(.*\)/\1\2/' .depend >dep.out
	mv dep.out .depend

depend::
	for i in $(SUBDIRS) ;\
	do \
	(cd $$i ; echo "--- Making" depend "in $$i ..."; \
	$(MAKE_COMMAND) depend TOPDIR='../$(TOPDIR)' TOP_PROTO_H=$(PROTO_H) ); \
	done

.depend: 
	touch .depend
	$(MKPROTO) -p $(LIB_C_SOURCES) >$(PROTO_H)
	$(DEPEND) -f.depend -- $(CPPFLAGS) -- $(LIB_C_SOURCES)
	sed  's/^\([^ 	].*o:.*\)$(PROTO_H)\(.*\)/\1\2/' .depend >dep.out
	mv dep.out .depend
	for i in $(SUBDIRS) ;\
	do \
	(cd $$i ; echo "--- Making" depend "in $$i ..."; \
	$(MAKE_COMMAND) depend TOPDIR='../$(TOPDIR)' TOP_PROTO_H=$(PROTO_H) ); \
	done

clean:
	rm -f $(LIBRARY) $(LIB_OBJECTS) $(PROTO_H)




install:
	-( cd $(BETA_LIB_DEST); cp -f $(LIBRARY) old )
	-( cd $(BETA_INC_DEST); cp -f $(USER_INCS) old )
	cp -f $(LIBRARY) $(BETA_LIB_DEST)
	chmod 664 $(BETA_LIB_DEST)/$(LIBRARY)
	cp -f $(USER_INCS) $(BETA_INC_DEST)
	(cd $(BETA_INC_DEST); chmod 664 $(USER_INCS) )
	@echo 'Beta Install Complete!'


install_production:
	-( cd $(PROD_LIB_DEST); cp -f $(LIBRARY) old )
	-( cd $(PROD_INC_DEST); cp -f $(USER_INCS) old )
	cp -f $(LIBRARY) $(PROD_LIB_DEST)
	chmod 664 $(PROD_LIB_DEST)/$(LIBRARY)
	cp -f $(USER_INCS) $(PROD_INC_DEST)
	(cd $(PROD_INC_DEST); chmod 664 $(USER_INCS) )
	@echo 'Production Install Complete!'

   
$(PROTO_H): $(LIB_C_SOURCES)
	$(MKPROTO) -p $(LIB_C_SOURCES) >$@
	

tags: 
	etags -t *.h *.c

#
# include dependancies generated by 'make depend'
#
include .depend

# 
# $Log$
# Revision 1.1  1994/06/06 13:19:40  houghton
# Lib Clue beta version used for Rating 1.0
#
# Revision 1.1  1994/01/23  18:16:55  houghton
# Production release 1.0 of MakeConfig system
#
#
